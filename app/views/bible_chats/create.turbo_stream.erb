<%= turbo_stream.append "bible_chat_messages" do %>
  <%= render "bible_chats/bible_chat_message", bible_chat_message: @message %>
<% end %>

<%= turbo_stream.replace "new_bible_chat_message" do %>
  <%= form_with model: BibleChatMessage.new, 
      url: bible_chat_conversation_bible_chat_messages_path(@conversation, translation: @translation), 
      class: "flex items-end gap-2", 
      data: { bible_chat_target: "form" }, 
      id: "new_bible_chat_message" do |form| %>
    <div class="flex-grow">
      <%= form.text_area :content, 
          class: "w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-800 dark:text-white p-2 focus:ring-2 focus:ring-green-500 focus:border-transparent resize-none",
          placeholder: "Type your message...", 
          rows: 1,
          data: { 
            bible_chat_target: "input",
            action: "keydown->bible-chat#handleKeydown input->bible-chat#resize"
          } %>
    </div>
    <%= form.submit "Send", 
        class: "bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-lg" %>
  <% end %>
<% end %>